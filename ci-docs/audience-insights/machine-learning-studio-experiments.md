---
title: Eksperimentiranje za studio za strojno učenje (klasični način)
description: Uporabite modele za studio za strojno učenje (klasični način) v storitvi Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: sl-SI
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598359"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="29ccd-103">Uporabite modele na podlagi studia za strojno učenje Azure (klasični način)</span><span class="sxs-lookup"><span data-stu-id="29ccd-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="29ccd-104">Združeni podatki v storitvi Dynamics 365 Customer Insights so vir za gradnjo modelov strojnega učenja, ki lahko ustvarijo dodatne vpoglede v poslovanje.</span><span class="sxs-lookup"><span data-stu-id="29ccd-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="29ccd-105">Customer Insights se integrira s studiom za strojno učenje (klasični način), da lahko uporabljate lastne modele po meri.</span><span class="sxs-lookup"><span data-stu-id="29ccd-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="29ccd-106">Če si želite ogledati, kako se modeli, razviti s storitvijo Strojno učenje Azure, integrirajo s storitvijo Customer Insights, glejte [Eksperimentiranje s strojnim učenjem Azure](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="29ccd-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="29ccd-107">Zahteve</span><span class="sxs-lookup"><span data-stu-id="29ccd-107">Prerequisites</span></span>

- <span data-ttu-id="29ccd-108">Dostop do storitve Customer Insights</span><span class="sxs-lookup"><span data-stu-id="29ccd-108">Access to Customer Insights</span></span>
- <span data-ttu-id="29ccd-109">Aktivna naročnina na storitev Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="29ccd-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="29ccd-110">Poenoteni profili strank</span><span class="sxs-lookup"><span data-stu-id="29ccd-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="29ccd-111">Nastavitev [izvoza entitete v shrambo Azure Blob](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="29ccd-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="29ccd-112">Nastavitev studia za strojno učenje (klasični način)</span><span class="sxs-lookup"><span data-stu-id="29ccd-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="29ccd-113">V prvem koraku moramo ustvariti delovni prostor in odpreti Studio za strojno učenje (klasični način).</span><span class="sxs-lookup"><span data-stu-id="29ccd-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="29ccd-114">Pojdite v[https://www.portal.azure.com](https://www.portal.azure.com/) in se vpišite.</span><span class="sxs-lookup"><span data-stu-id="29ccd-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="29ccd-115">Izberite možnost **Ustvarjanje vira**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="29ccd-116">Poiščite **Delovni prostor studia za strojno učenje** in izberite **Ustvari**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="29ccd-117">Vnesite zahtevane podatke, da [ustvarite delovni prostor](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="29ccd-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="29ccd-118">Izberite **Cena za razred cen paketa spletne storitve** na podlagi količine podatkov, ki jih nameravate uvoziti.</span><span class="sxs-lookup"><span data-stu-id="29ccd-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="29ccd-119">Za boljše delovanje izberite **Lokacija**, ki vam je geografsko najbližje.</span><span class="sxs-lookup"><span data-stu-id="29ccd-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="29ccd-120">Ko ste ustvarili vir, se vam bo prikazala nadzorna plošča delovnega prostora studia za strojno učenje.</span><span class="sxs-lookup"><span data-stu-id="29ccd-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="29ccd-121">Izberite **Zaženi studio za strojno učenje**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Uporabniški vmesnik studia za strojno učenje Azure](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="29ccd-123">Uporaba studia za strojno učenje Azure</span><span class="sxs-lookup"><span data-stu-id="29ccd-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="29ccd-124">Zdaj lahko ustvarite nov poskus ali uvozite obstoječo predlogo poskusa iz galerije vzorcev.</span><span class="sxs-lookup"><span data-stu-id="29ccd-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="29ccd-125">Na voljo je vzorčno eksperimentiranje za tri standardne scenarije:</span><span class="sxs-lookup"><span data-stu-id="29ccd-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="29ccd-126">Predvidevanje izgube strank</span><span class="sxs-lookup"><span data-stu-id="29ccd-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="29ccd-127">Skupna vrednost stranke</span><span class="sxs-lookup"><span data-stu-id="29ccd-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="29ccd-128">Priporočilo izdelka ali naslednje najboljše dejanje</span><span class="sxs-lookup"><span data-stu-id="29ccd-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="29ccd-129">Če ustvarite nov poskus ali uporabite predlogo poskusa iz galerije, morate konfigurirati lastnosti **Podatki za uvoz**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="29ccd-130">Uporabite vodeno izkušnjo ali neposredno navedite podrobnosti za dostop do shrambe zbirke dvojiških podatkov Azure, ki vsebuje vaše podatke.</span><span class="sxs-lookup"><span data-stu-id="29ccd-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Poskus studia za strojno učenje Azure](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="29ccd-132">Zdaj lahko ustvarite prodajni lijak za obdelavo po meri, s katerim lahko počistite in predobdelate podatke, izvlečete funkcije in pripravite ustrezni model.</span><span class="sxs-lookup"><span data-stu-id="29ccd-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="29ccd-133">Preizkusite in optimizirajte delovanje modela.</span><span class="sxs-lookup"><span data-stu-id="29ccd-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="29ccd-134">Ko boste zadovoljni s kakovostjo modela, izberite **Nastavitev spletne storitve** > **Spletna storitev za napovedovanje**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="29ccd-135">S to možnostjo boste uvozili pripravljeni model in prodajni lijak lastnosti iz poskusa usposabljanja v napovedno storitev.</span><span class="sxs-lookup"><span data-stu-id="29ccd-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="29ccd-136">Napovedna storitev lahko sprejme tudi kak drug niz vhodnih podatkov s shemo, uporabljeno v poskusu usposabljanja za ustvarjanje napovedi.</span><span class="sxs-lookup"><span data-stu-id="29ccd-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Nastavitev spletne storitve za napovedovanje](media/predictive-webservice-control.png)

1. <span data-ttu-id="29ccd-138">Ko vam poskus spletne storitve za napovedovanje uspe, ga lahko uporabite za samodejno načrtovanje.</span><span class="sxs-lookup"><span data-stu-id="29ccd-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="29ccd-139">Če želite uporabiti spletno storitev skupaj z aplikacijo Customer Insights, izberite **Uvedba spletne storitve** > **[Nov] predogled uvedbe spletne storitve**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="29ccd-140">[Podrobno se seznanite z uvedbo spletne storitve](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="29ccd-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Uvedba spletne storitve za napovedovanje](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="29ccd-142">Vzorčni modeli iz galerije</span><span class="sxs-lookup"><span data-stu-id="29ccd-142">Sample models from the gallery</span></span>

<span data-ttu-id="29ccd-143">Za modele v tem članku bomo uporabili izmišljeni scenarij hotela Contoso.</span><span class="sxs-lookup"><span data-stu-id="29ccd-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="29ccd-144">Hotel Contoso zbira naslednje podatke:</span><span class="sxs-lookup"><span data-stu-id="29ccd-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="29ccd-145">Podatki CRM o bivanju v hotelu.</span><span class="sxs-lookup"><span data-stu-id="29ccd-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="29ccd-146">Nabor podatkov vključuje podatke o datumih bivanja za vsako registrirano stranko.</span><span class="sxs-lookup"><span data-stu-id="29ccd-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="29ccd-147">Vsebuje tudi informacije o rezervaciji, vrstah sob, podrobnostih o porabi in podobno.</span><span class="sxs-lookup"><span data-stu-id="29ccd-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="29ccd-148">Podatki zajemajo obdobje štirih let, od januarja 2014 do januarja 2018.</span><span class="sxs-lookup"><span data-stu-id="29ccd-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="29ccd-149">Profili strank, tj. hotelskih gostov.</span><span class="sxs-lookup"><span data-stu-id="29ccd-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="29ccd-150">Ti profili vsebujejo podatke o vsaki stranki, vključno z njihovim imenom, rojstnim dnem, poštnim naslovom, spolom in telefonsko številko.</span><span class="sxs-lookup"><span data-stu-id="29ccd-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="29ccd-151">Uporaba storitev, ki jih nudi hotel, kot so wellness center, pralnica, WiFi ali pošta.</span><span class="sxs-lookup"><span data-stu-id="29ccd-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="29ccd-152">Ti podatki se beležijo za vsako registrirano stranko.</span><span class="sxs-lookup"><span data-stu-id="29ccd-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="29ccd-153">Uporaba storitev je običajno povezana z bivanjem.</span><span class="sxs-lookup"><span data-stu-id="29ccd-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="29ccd-154">V nekaterih primerih lahko storitve uporabljajo stranke, ne da bi bivale v hotelu.</span><span class="sxs-lookup"><span data-stu-id="29ccd-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="29ccd-155">Analiza izgube strank</span><span class="sxs-lookup"><span data-stu-id="29ccd-155">Churn Analysis</span></span>

<span data-ttu-id="29ccd-156">Analiza izgube strank se nanaša na različna poslovna področja.</span><span class="sxs-lookup"><span data-stu-id="29ccd-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="29ccd-157">V tem primeru si bomo ogledali izgubo storitev, zlasti v okviru hotelskih storitev, ki so opisane zgoraj.</span><span class="sxs-lookup"><span data-stu-id="29ccd-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="29ccd-158">Ponuja delovni primer celovitega modela prodajnega lijaka, ki ga je mogoče uporabiti kot izhodišče za katero koli drugo vrsto modela za izgubo.</span><span class="sxs-lookup"><span data-stu-id="29ccd-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="29ccd-159">Opredelitev izgube</span><span class="sxs-lookup"><span data-stu-id="29ccd-159">Definition of Churn</span></span>

<span data-ttu-id="29ccd-160">Opredelitev izgube se lahko razlikuje glede na scenarij.</span><span class="sxs-lookup"><span data-stu-id="29ccd-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="29ccd-161">V tem primeru je treba gosta, ki v zadnjem letu ni obiskal hotela, označiti kot izgubljenega.</span><span class="sxs-lookup"><span data-stu-id="29ccd-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="29ccd-162">Predlogo poskusa lahko uvozite iz galerije.</span><span class="sxs-lookup"><span data-stu-id="29ccd-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="29ccd-163">Najprej se prepričajte, da uvažate podatke za **Bivanje v hotelu**, **Podatki o stranki** in **Podatki o uporabi storitve** iz shrambe zbirke dvojiških podatkov Azure.</span><span class="sxs-lookup"><span data-stu-id="29ccd-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Uvozi podatke za model menjavanja strank](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="29ccd-165">Določanje lastnosti</span><span class="sxs-lookup"><span data-stu-id="29ccd-165">Featurization</span></span>

<span data-ttu-id="29ccd-166">Na podlagi opredelitve izgube moramo najprej prepoznati osnovne lastnosti, ki bodo vplivale na to oznako.</span><span class="sxs-lookup"><span data-stu-id="29ccd-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="29ccd-167">Nato obdelamo osnovne lastnosti v številčne lastnosti, ki jih je mogoče uporabiti pri modelih strojnega učenja.</span><span class="sxs-lookup"><span data-stu-id="29ccd-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="29ccd-168">Integracija podatkov se zgodi v storitvi Customer Insights, tako da se lahko tabelam pridružimo z uporabo možnosti *ID stranke*.</span><span class="sxs-lookup"><span data-stu-id="29ccd-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Združevanje uvoženih podatkov](media/join-imported-data.png)

<span data-ttu-id="29ccd-170">Določitev lastnosti za ustvarjanje modela za analizo izgube je lahko zapletena.</span><span class="sxs-lookup"><span data-stu-id="29ccd-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="29ccd-171">Podatki so funkcija časa z novo dejavnostjo hotela, ki se beleži vsakodnevno.</span><span class="sxs-lookup"><span data-stu-id="29ccd-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="29ccd-172">Med določanjem lastnosti želimo ustvariti statične lastnosti iz dinamičnih podatkov.</span><span class="sxs-lookup"><span data-stu-id="29ccd-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="29ccd-173">V tem primeru ustvarimo več funkcij iz hotelske dejavnosti z drsnim oknom, ki označuje obdobje enega leta.</span><span class="sxs-lookup"><span data-stu-id="29ccd-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="29ccd-174">Razširimo tudi kategorične lastnosti, kot sta vrsta sobe ali vrsta rezervacije, in sicer v ločene lastnosti z uporabo kodiranja z eno kategorično vrednostjo.</span><span class="sxs-lookup"><span data-stu-id="29ccd-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="29ccd-175">Končni seznam funkcij:</span><span class="sxs-lookup"><span data-stu-id="29ccd-175">Final list of features:</span></span>

| <span data-ttu-id="29ccd-176">**Številka**</span><span class="sxs-lookup"><span data-stu-id="29ccd-176">**Number**</span></span>  | <span data-ttu-id="29ccd-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="29ccd-177">**Original_Column**</span></span>          | <span data-ttu-id="29ccd-178">**Izpeljane funkcije**</span><span class="sxs-lookup"><span data-stu-id="29ccd-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="29ccd-179">1</span><span class="sxs-lookup"><span data-stu-id="29ccd-179">1</span></span>           | <span data-ttu-id="29ccd-180">Vrsta sobe</span><span class="sxs-lookup"><span data-stu-id="29ccd-180">Room Type</span></span>                    | <span data-ttu-id="29ccd-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="29ccd-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="29ccd-182">2</span><span class="sxs-lookup"><span data-stu-id="29ccd-182">2</span></span>           | <span data-ttu-id="29ccd-183">Vrsta rezervacije</span><span class="sxs-lookup"><span data-stu-id="29ccd-183">Booking Type</span></span>                 | <span data-ttu-id="29ccd-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="29ccd-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="29ccd-185">3</span><span class="sxs-lookup"><span data-stu-id="29ccd-185">3</span></span>           | <span data-ttu-id="29ccd-186">Kategorija potovanja</span><span class="sxs-lookup"><span data-stu-id="29ccd-186">Travel Category</span></span>              | <span data-ttu-id="29ccd-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="29ccd-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="29ccd-188">4</span><span class="sxs-lookup"><span data-stu-id="29ccd-188">4</span></span>           | <span data-ttu-id="29ccd-189">Porabljen denar</span><span class="sxs-lookup"><span data-stu-id="29ccd-189">Dollars Spent</span></span>                | <span data-ttu-id="29ccd-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="29ccd-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="29ccd-191">5</span><span class="sxs-lookup"><span data-stu-id="29ccd-191">5</span></span>           | <span data-ttu-id="29ccd-192">Datuma prijave in odjave</span><span class="sxs-lookup"><span data-stu-id="29ccd-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="29ccd-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="29ccd-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="29ccd-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="29ccd-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="29ccd-195">6</span><span class="sxs-lookup"><span data-stu-id="29ccd-195">6</span></span>           | <span data-ttu-id="29ccd-196">Uporaba storitve</span><span class="sxs-lookup"><span data-stu-id="29ccd-196">Service Usage</span></span>                | <span data-ttu-id="29ccd-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="29ccd-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="29ccd-198">Izbira modela</span><span class="sxs-lookup"><span data-stu-id="29ccd-198">Model selection</span></span>

<span data-ttu-id="29ccd-199">Zdaj moramo izbrati še optimalen algoritem, ki ga bomo uporabili.</span><span class="sxs-lookup"><span data-stu-id="29ccd-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="29ccd-200">V tem primeru večina lastnosti temelji na kategoričnih lastnostih.</span><span class="sxs-lookup"><span data-stu-id="29ccd-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="29ccd-201">Običajno dobro delujejo modeli, ki temeljijo na odločitvenem drevesu.</span><span class="sxs-lookup"><span data-stu-id="29ccd-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="29ccd-202">Če so lastnosti izključno številčne, bi bilo morda bolje izbrati nevronsko mrežo.</span><span class="sxs-lookup"><span data-stu-id="29ccd-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="29ccd-203">Metoda podpornih vektorjev (SVM) je ravno tako dobra možnost v takšnih situacijah; vendar jo je treba za optimalno delovanje kar precej prilagoditi.</span><span class="sxs-lookup"><span data-stu-id="29ccd-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="29ccd-204">Kot prvi model izbire izberimo **Dvorazredno izboljšano odločitveno drevo**, kot drugi model pa **Dvorazredno metodo podpornih vektorjev**.</span><span class="sxs-lookup"><span data-stu-id="29ccd-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="29ccd-205">Studio za strojno učenje Azure omogoča testiranje A/B, zato je morda bolje začeti z dvema modeloma kot z enim.</span><span class="sxs-lookup"><span data-stu-id="29ccd-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="29ccd-206">Spodnja slika prikazuje prodajni lijak modela za usposabljanje in ocenjevanje iz studia za strojno učenje Azure:</span><span class="sxs-lookup"><span data-stu-id="29ccd-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Model izgube v studiu za strojno učenje Azure](media/azure-machine-learning-model.png)

<span data-ttu-id="29ccd-208">Uporabljamo tudi tehniko, ki se imenuje **Pomembnost permutacije lastnosti** in je pomemben vidik optimizacije modelov.</span><span class="sxs-lookup"><span data-stu-id="29ccd-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="29ccd-209">Vgrajeni modeli imajo malo ali nič vpogleda v vpliv katere koli posebne lastnosti na končno napoved.</span><span class="sxs-lookup"><span data-stu-id="29ccd-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="29ccd-210">Kalkulator pomembnosti lastnosti uporablja algoritem po meri za izračun vpliva posameznih lastnosti na rezultat posebnega modela.</span><span class="sxs-lookup"><span data-stu-id="29ccd-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="29ccd-211">Pomembnost lastnosti je normalizirana med +1 in –1.</span><span class="sxs-lookup"><span data-stu-id="29ccd-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="29ccd-212">Negativen vpliv pomeni, da ima ustrezna lastnost kontraintuitiven vpliv na rezultat in jo je treba odstraniti iz modela.</span><span class="sxs-lookup"><span data-stu-id="29ccd-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="29ccd-213">Pozitiven vpliv pomeni, da lastnost močno prispeva k napovedi.</span><span class="sxs-lookup"><span data-stu-id="29ccd-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="29ccd-214">Te vrednosti niso korelacijski koeficienti, saj gre za drugačne metrike.</span><span class="sxs-lookup"><span data-stu-id="29ccd-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="29ccd-215">Za več informacij glejte [Pomembnost lastnosti permutacije](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="29ccd-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="29ccd-216">Celoten [poskus z izgubo je na voljo v galeriji Azure AI](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="29ccd-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="29ccd-217">Napovedana skupna vrednost stranke</span><span class="sxs-lookup"><span data-stu-id="29ccd-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="29ccd-218">Izračun vrednosti življenjske dobe stranke (CLTV) je ena ključnih meritev, ki jo lahko podjetje uporabi za oceno in segmentiranje strank.</span><span class="sxs-lookup"><span data-stu-id="29ccd-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="29ccd-219">V hotelskem poslu je poznavanje strank ključnega pomena.</span><span class="sxs-lookup"><span data-stu-id="29ccd-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="29ccd-220">Ključno je na primer razumevanje dejavnikov, ki ustvarjajo dobre stranke.</span><span class="sxs-lookup"><span data-stu-id="29ccd-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="29ccd-221">Vodstvo hotela tako lažje oceni, na katere funkcije se morajo osredotočiti in jih izboljšati, da bi zadovoljili svoje najpremožnejše stranke.</span><span class="sxs-lookup"><span data-stu-id="29ccd-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="29ccd-222">Te odločitve lahko neposredno vplivajo na prodajo in zaslužek.</span><span class="sxs-lookup"><span data-stu-id="29ccd-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="29ccd-223">Opredelitev CLTV</span><span class="sxs-lookup"><span data-stu-id="29ccd-223">Definition of CLTV</span></span>

<span data-ttu-id="29ccd-224">Za ta primer bomo CLTV stranke opredelili kot skupno vsoto v dolarjih, ki naj bi jo stranka porabila v naslednjih 365 dneh.</span><span class="sxs-lookup"><span data-stu-id="29ccd-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="29ccd-225">To vrednost bomo napovedali tako, da bomo uporabili podatke iz preteklih treh letih za vse stranke.</span><span class="sxs-lookup"><span data-stu-id="29ccd-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="29ccd-226">Določanje lastnosti</span><span class="sxs-lookup"><span data-stu-id="29ccd-226">Featurization</span></span>

<span data-ttu-id="29ccd-227">V tem primeru bo določanje lastnosti precej podobno scenariju z izgubo strank.</span><span class="sxs-lookup"><span data-stu-id="29ccd-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="29ccd-228">Oznake in predvidene vrednosti pa so drugačne, kot je opredeljeno zgoraj.</span><span class="sxs-lookup"><span data-stu-id="29ccd-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="29ccd-229">Izbira modela</span><span class="sxs-lookup"><span data-stu-id="29ccd-229">Model selection</span></span>

<span data-ttu-id="29ccd-230">Napovedovanje CLTV je regresijska težava, saj je predvidena vrednost neprekinjena spremenljivka s pozitivno vrednostjo.</span><span class="sxs-lookup"><span data-stu-id="29ccd-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="29ccd-231">Na podlagi lastnosti funkcije izberemo **Regresijo izboljšanega odločitvenega drevesa** kot prvi algoritem in **Regresijo nevronske mreže** kot drugi algoritem za usposabljanje modela.</span><span class="sxs-lookup"><span data-stu-id="29ccd-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="29ccd-232">Priporočilo izdelka ali naslednje najboljše dejanje</span><span class="sxs-lookup"><span data-stu-id="29ccd-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="29ccd-233">Priporočilo izdelka v hotelskem scenariju se razlaga kot priporočilo storitev, ki jih hotel ponuja strankam.</span><span class="sxs-lookup"><span data-stu-id="29ccd-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="29ccd-234">Cilj je izbrati ustrezne storitve za stranke, da bo njihova uporaba čim večja.</span><span class="sxs-lookup"><span data-stu-id="29ccd-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="29ccd-235">Podobno je s filmskimi priporočili za uporabnike storitev pretakanja video vsebin.</span><span class="sxs-lookup"><span data-stu-id="29ccd-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="29ccd-236">Opredelitev priporočila izdelka ali naslednjega najboljšega dejanja</span><span class="sxs-lookup"><span data-stu-id="29ccd-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="29ccd-237">Cilj opredelimo kot maksimiranje uporabe storitve po dolarski vrednosti, tako da strankam hotela ponudimo njim najustreznejše storitve glede na njihovo zanimanje.</span><span class="sxs-lookup"><span data-stu-id="29ccd-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="29ccd-238">Določanje lastnosti</span><span class="sxs-lookup"><span data-stu-id="29ccd-238">Featurization</span></span>

<span data-ttu-id="29ccd-239">Tako kot model izgube tudi mi združujemo atribut ServiceCustomerID s CustomerID, da bi dosledno ustvarjali priporočila za vsak CustomerID.</span><span class="sxs-lookup"><span data-stu-id="29ccd-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Določanje lastnosti modela priporočil](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="29ccd-241">Podatki se pridobivajo iz treh različnih entitet, iz katerih nato izhajajo lastnosti.</span><span class="sxs-lookup"><span data-stu-id="29ccd-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="29ccd-242">Določanje lastnosti za priporočila se razlikuje od izgube ali scenarijev CLTV.</span><span class="sxs-lookup"><span data-stu-id="29ccd-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="29ccd-243">Model priporočil potrebuje vhodne podatke v obliki treh sklopov lastnosti.</span><span class="sxs-lookup"><span data-stu-id="29ccd-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="29ccd-244">Izbira modela</span><span class="sxs-lookup"><span data-stu-id="29ccd-244">Model selection</span></span>

<span data-ttu-id="29ccd-245">Izdelke ali storitve napovedujemo z algoritmom, ki se imenuje **Usposabljanje orodja za priporočanje ujemanja**, da z njim pripravimo model napovedovanja.</span><span class="sxs-lookup"><span data-stu-id="29ccd-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritem za priporočanje izdelkov](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="29ccd-247">Tri vhodna vrata za model **Usposabljanje orodja za priporočanje ujemanja** upoštevajo podatke o uporabi storitve usposabljanja, opis stranke (izbirno) in opis storitve.</span><span class="sxs-lookup"><span data-stu-id="29ccd-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="29ccd-248">Obstajajo trije različni načini ocenjevanja modela.</span><span class="sxs-lookup"><span data-stu-id="29ccd-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="29ccd-249">Prvi je za ocenjevanje modela, pri katerem se izračuna ocena Normaliziran znižan skupni dobiček (NDCG) za razvrščanje ocenjenih elementov.</span><span class="sxs-lookup"><span data-stu-id="29ccd-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="29ccd-250">V tem poskusu je ocena NDCG 0,97.</span><span class="sxs-lookup"><span data-stu-id="29ccd-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="29ccd-251">Ostali dve možnosti ocenjujeta model v celotnem katalogu priporočljivih storitev ali pa le za elemente, ki jih uporabniki prej niso uporabljali.</span><span class="sxs-lookup"><span data-stu-id="29ccd-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="29ccd-252">Če si podrobneje pogledamo distribucijo priporočil v celotnem katalogu storitev, opazimo, da so najpogosteje priporočene storitve telefon, WiFi in pošta.</span><span class="sxs-lookup"><span data-stu-id="29ccd-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="29ccd-253">To je skladno z našimi ugotovitvami iz distribucij podatkov o porabi storitev:</span><span class="sxs-lookup"><span data-stu-id="29ccd-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Izhod modela priporočil](media/azure-machine-learning-model-output.png)

<span data-ttu-id="29ccd-255">Celoten [poskus priporočila izdelka je na voljo v galeriji Azure AI.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="29ccd-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="29ccd-256">Integracija modelov po meri</span><span class="sxs-lookup"><span data-stu-id="29ccd-256">Integrate custom models</span></span>

<span data-ttu-id="29ccd-257">Če želite te napovedi uporabiti v aplikaciji Customer Insights, morate **izvoziti** predvidevanja skupaj z ID-ji strank.</span><span class="sxs-lookup"><span data-stu-id="29ccd-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="29ccd-258">[Izvozite jih na isto mesto v shrambi v zbirki dvojiških podatkov Azure](/azure/storage/common/storage-import-export-data-from-blobs), kamor izvažate izvorne podatke.</span><span class="sxs-lookup"><span data-stu-id="29ccd-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="29ccd-259">Napovedno spletno storitev je mogoče načrtovati tako, da se redno izvaja in posodablja rezultate.</span><span class="sxs-lookup"><span data-stu-id="29ccd-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="29ccd-260">Podatke, ki jih ustvari model po meri, lahko uporabimo za dodatno obogatitev podatkov o strankah.</span><span class="sxs-lookup"><span data-stu-id="29ccd-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="29ccd-261">Za več informacij glejte [Modeli strojnega učenja po meri](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="29ccd-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]